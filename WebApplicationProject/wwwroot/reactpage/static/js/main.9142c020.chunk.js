(this.webpackJsonpreactside=this.webpackJsonpreactside||[]).push([[0],{23:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},60:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var i,a=n(1),s=n(25),o=n.n(s),c=(n(40),n.p,n(41),n(2)),r=n(4),l=n(10),u=n.n(l),d=n(8),j=n.n(d),p=(n(23),n(0)),b=function(){var t=Object(c.f)(),e=Object(a.useState)({}),n=Object(r.a)(e,2),i=n[0],s=n[1],o=Object(a.useState)(""),l=Object(r.a)(o,2),d=l[0],b=l[1],h=Object(a.useState)(""),x=Object(r.a)(h,2),f=x[0],O=x[1],g=Object(a.useState)(""),m=Object(r.a)(g,2),y=m[0],v=m[1],C=Object(a.useState)(""),w=Object(r.a)(C,2),T=w[0],k=w[1],N=Object(a.useState)(""),_=Object(r.a)(N,2),S=_[0],W=_[1],z=Object(a.useState)(""),P=Object(r.a)(z,2),D=P[0],U=P[1],A=Object(a.useState)(""),E=Object(r.a)(A,2),I=E[0],L=E[1],F=Object(a.useState)(""),J=Object(r.a)(F,2),V=J[0],Y=J[1],B=Object(a.useState)(""),G=Object(r.a)(B,2),R=G[0],q=G[1],H=Object(a.useState)(""),M=Object(r.a)(H,2),X=M[0],K=M[1];Object(a.useEffect)((function(){var t=localStorage.getItem("JWT");u.a.ajax({type:"GET",url:"https://localhost:44309/api/Customer/GetCustomerDetails",contentType:"application/json",dataType:"json",headers:{Authorization:"Bearer "+t}}).done((function(t){s(t),b(t.First_Name),O(t.Last_Name),v(t.Address),k(t.Phone_No),W(t.Credit_Card_No),void 0!=t.User&&(U(t.User.User_Name),L(t.User.Password),q(t.User.Email),K(t.User.Password),Y(t.User.Password))})).fail((function(t){console.log(t)}))}),[]);var Q=function(){var e=localStorage.getItem("JWT"),n=T.includes("-")?T.split("-")[1]:T,a=JSON.stringify({Id:i.Id,First_Name:d,Last_Name:f,Address:y,Phone_No:u()("#prefixNum").val()+"-"+n,Credit_Card_No:S,User_Id:i.User_Id,User:{Id:i.User_Id,User_Name:D,Password:I,Email:R,User_Role:3}}),s=u.a.ajax({url:"https://localhost:44309/api/Customer/UpdateCustomerDetails",type:"PUT",contentType:"application/json",dataType:"json",data:a,headers:{Authorization:"Bearer "+e}}).done((function(e){console.log(e),j.a.fire("Your details have been updated succefully!","You can change it again anytime","success").then((function(){t.push("/customer/tickets"),t.push("/customer/details")}))})).fail((function(t){if(403===t.status){var e=s.responseText.split("_")[1];j.a.fire({icon:"error",title:"Oops...",text:"".concat(e," is allready taken")})}401===t.status&&j.a.fire({icon:"error",title:"Oops...",text:"You are not allowed to update details"})}))},Z=function(){return D.length<5?"User name is too short":D.length>20?"User name is too long":I!==V?"You must confirm your password correctly!":I.length<5?"Your password is too short":I.length>20?"Your password is too long":d.length<2?"First name is too short":f.length<2?"Last name is too short":y.length<10?"Address is too short":7!==T.split("-")[1].length?"Phone number must include 7 digits":16!==S.length?"Credit card number must include 16 digits":""};return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Personal Details"})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" First Name: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:i.First_Name,onChange:function(t){b(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Last Name: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:i.Last_Name,onChange:function(t){O(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Address: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:i.Address,onChange:function(t){v(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Phone Number: "}),Object(p.jsxs)("select",{id:"prefixNum",defaultValue:T.split("-")[0],children:[Object(p.jsx)("option",{value:"050",defaultValue:!0,children:"050"}),Object(p.jsx)("option",{value:"051",children:"051"}),Object(p.jsx)("option",{value:"052",children:"052"}),Object(p.jsx)("option",{value:"053",children:"053"}),Object(p.jsx)("option",{value:"054",children:"054"}),Object(p.jsx)("option",{value:"055",children:"055"})]}),Object(p.jsx)("input",{type:"text",defaultValue:T.split("-")[1],onChange:function(t){k(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Credit Card Number: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:i.Credit_Card_No,onChange:function(t){W(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" User Name: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:D,onChange:function(t){U(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Password: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:I,onChange:function(t){L(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Confirm Password: "})," ",Object(p.jsx)("input",{type:"text",defaultValue:V,onChange:function(t){Y(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Email: "})," ",Object(p.jsx)("input",{type:"email",defaultValue:R,onChange:function(t){q(t.target.value)}})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"button",value:"Edit",style:{backgroundColor:"whitesmoke",height:"50px",width:"100px",fontSize:"25px",fontFamily:"Franklin Gothic Medium"},onClick:function(){console.log(X),console.log(I);var e=localStorage.getItem("JWT"),n=Z();""!==n?j.a.fire({icon:"error",title:"Oops...",text:"".concat(n)}):X!==I?u.a.ajax({type:"PUT",url:"https://localhost:44309/api/Customer/ChangeCustomerPassword?oldPassword=".concat(X,"&newPassword=").concat(I),contentType:"application/json",dataType:"json",headers:{Authorization:"Bearer "+e}}).done((function(t){console.log(t),Q()})).fail((function(e){403===e.status&&(console.log(e),j.a.fire({icon:"error",title:"Oops...",text:"New password can't be like the old one"}).then((function(){t.push("/customer/tickets"),t.push("/customer/details")}))),401===e.status&&j.a.fire({icon:"error",title:"Oops...",text:"You are not allowed to change password"}).then((function(){t.push("/customer/tickets"),t.push("/customer/details")}))})):Q()}})]})},h=function(t){var e=t.flight,n=Object(c.f)();return Object(p.jsxs)("div",{style:{backgroundColor:"whitesmoke",border:"1px solid black"},children:[Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Company: "}),"  ",e.AirlineCompanyName," "," ",Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Departure date: "})," ",e.Departure_Time.split("T")[0]," "," ",Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Origion Country: "}),"  ",e.OrigionCountry," "," ",Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Departure Time: "}),"  ",e.Departure_Time.split("T")[1]," "," "," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Destination Country: "}),"  ",e.DestinationCountry," "," ",Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Landing date: "}),"  ",e.Landing_Time.split("T")[0]," "," ",Object(p.jsx)("span",{style:{fontWeight:"bold"},children:" Landing Time: "}),"  ",e.Landing_Time.split("T")[1]," "," "," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"button",style:{backgroundColor:"salmon"},value:"Cancel Ticket",onClick:function(){var t=new Date;if(new Date(e.Departure_Time).getTime()>t.getTime()){var i=localStorage.getItem("JWT"),a=JSON.stringify({Id:e.Ticket_Id,Flight_Id:e.Id,AirlineCompanyName:e.AirlineCompanyName,OrigionCountry:e.OrigionCountry,DestinationCountry:e.DestinationCountry,Departure_Time:e.Departure_Time,Landing_Time:e.Landing_Time});u.a.ajax({type:"DELETE",url:"https://localhost:44309/api/Customer/CancelTicketPurchase",contentType:"application/json",data:a,headers:{Authorization:"Bearer "+i}}).done((function(t){j.a.fire("Ticket purchase was canceled succefully!","You can purchase tickets to another flights","success").then((function(){n.push("/customer/details"),n.push("/customer/tickets")}))})).fail((function(t){j.a.fire({icon:"error",title:"You can't cancel ticket purchase",text:"You are not allowed to cancel purchase"})}))}else j.a.fire({icon:"error",title:"You can't cancel ticket purchase",text:"The flight has already taken off"})}})]})},x=function(){var t,e=Object(a.useState)([]),n=Object(r.a)(e,2),i=n[0],s=n[1];return Object(a.useEffect)((function(){var t=localStorage.getItem("JWT");u.a.ajax({type:"GET",url:"https://localhost:44309/api/Customer/GetAllCustomerFlights",contentType:"application/json",dataType:"json",headers:{Authorization:"Bearer "+t}}).done((function(t){s(t)})).fail((function(t){console.log(t)}))}),[]),0!==i.length&&(t=i.map((function(t){return Object(p.jsx)(h,{flight:t},t.id)}))),Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:" viewing & managing your tickets"})," ",Object(p.jsx)("br",{})," ",Object(p.jsx)("br",{}),t,"  ",Object(p.jsx)("br",{}),"  ",Object(p.jsx)("br",{})]})},f=n(27),O=n(28),g=n(35),m=n(34),y=n(29),v=n(9),C=n(30).a.header(i||(i=Object(y.a)(["\n  width: 100%;\n  border-bottom: 10px solid #222;\n  z-index: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 100px 0;\n  height: 140px;\n  margin-bottom: 60px;\n  background: #f8f8f8;\n\n  .logo a {\n    padding-top: 33px;\n    display: flex;\n    flex-direction: column;\n    clear: both;\n    padding-bottom: 30px;\n    text-decoration: none;\n\n    p {\n      width: 500px;\n      display: block;\n    }\n    em {\n      font-size: 0.5em;\n      float: left;\n      display: block;\n      img {\n        display: inline-block;\n        margin-top: 5px;\n        width: 15px;\n        float: left;\n      }\n      .letterhead {\n        display: inline-block;\n        line-height: 260%;\n        float: left;\n      }\n    }\n  }\n  .gray {\n    color: #ccc;\n  }\n  a {\n    color: #222;\n    opacity: 0.55;\n    transition: all 0.6s;\n    color: #222;\n    font-size: 1em;\n  }\n  a:hover {\n    opacity: 1;\n  }\n  .fa-bars {\n    display: none;\n    color: #222;\n    font-size: 2rem;\n  }\n  nav {\n    ul {\n      display: flex;\n      justify-content: space-between;\n    }\n    li {\n      margin: 0 15px;\n      justify-content: space-between;\n      font-size: 1em;\n    }\n    a {\n      font-size: 1em;\n      text-decoration: none;\n      .active {\n        color: tomato;\n      }\n    }\n    a.active {\n      color: #222;\n    }\n  }\n\n  @media only screen and (max-width: 800px) {\n    padding: 0px;\n    .logo {\n      padding-left: 15px;\n      padding-top: 0px !important;\n    }\n  }\n  @media only screen and (max-width: 600px) {\n    height: auto;\n    min-height: 50px;\n    display: block;\n    position: relative;\n    .logo {\n      width: 100%;\n      display: block;\n      padding-top: 20px;\n      margin: 0px;\n      margin-left: -5px;\n      a {\n        padding: 20px 0px;\n      }\n    }\n    .fa-bars {\n      display: inline-block;\n      position: absolute;\n      top: 10px;\n      right: 10px;\n      cursor: pointer;\n    }\n    ul.collapsed {\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      flex-wrap: wrap;\n\n      overflow: hidden;\n      max-height: 0;\n      -moz-transition-duration: 0.4s;\n      -webkit-transition-duration: 0.4s;\n      -o-transition-duration: 0.4s;\n      transition-duration: 0.4s;\n      -moz-transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n      -webkit-transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n      -o-transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n      transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n\n      &.is-expanded {\n        overflow: hidden;\n        max-height: 500px; /* approximate max height */\n        -moz-transition-duration: 0.4s;\n        -webkit-transition-duration: 0.4s;\n        -o-transition-duration: 0.4s;\n        transition-duration: 0.4s;\n        -moz-transition-timing-function: ease-in;\n        -webkit-transition-timing-function: ease-in;\n        -o-transition-timing-function: ease-in;\n        transition-timing-function: ease-in;\n      }\n      li {\n        padding: 15px 10px;\n        margin: 0px 0px;\n        width: 100%;\n      }\n    }\n  }\n"]))),w=function(t){Object(g.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(f.a)(this,n),(i=e.call(this,t)).state={isExpanded:!1},i}return Object(O.a)(n,[{key:"handleToggle",value:function(t){t.preventDefault(),this.setState({isExpanded:!this.state.isExpanded})}},{key:"render",value:function(){var t=this,e=this.state.isExpanded;return Object(p.jsx)(C,{children:Object(p.jsxs)("nav",{className:"nav",children:[Object(p.jsx)("i",{className:"fa fa-bars","aria-hidden":"true",onClick:function(e){return t.handleToggle(e)}}),Object(p.jsxs)("ul",{className:"collapsed ".concat(e?"is-expanded":""),children:[Object(p.jsx)(v.b,{activeClassName:"active",to:"/customer/tickets",children:Object(p.jsx)("li",{children:"Tickets"})}),Object(p.jsx)(v.b,{activeClassName:"active",to:"/customer/details",children:Object(p.jsx)("li",{children:"Details"})})]})]})})}}]),n}(a.Component),T=Object(c.g)(w),k=(n(60),n(61),function(){var t=Object(c.f)();return Object(a.useEffect)((function(){t.push("/customer/tickets")}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)(T,{}),Object(p.jsx)(c.c,{children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)(c.a,{path:"/customer/tickets",children:[" ",Object(p.jsx)(x,{})," "]}),Object(p.jsxs)(c.a,{path:"/customer/details",children:[" ",Object(p.jsx)(b,{})," "]})]})})]})}),N=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Airline"})})},_=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Admin"})})},S=function(){var t=Object(c.f)();return Object(a.useEffect)((function(){!function(){var t={Name:"uri321",Password:"vzd474"},e=JSON.stringify(t),n=new XMLHttpRequest;n.open("POST","https://localhost:44309/api/Auth/token",!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onload=function(){var t=n.responseText;4==n.readyState&&"200"==n.status&&window.localStorage.setItem("JWT",t)},n.send(e)}();t.push("/customer/tickets")}),[]),Object(p.jsx)("div",{id:"bg",children:Object(p.jsxs)(c.c,{children:[Object(p.jsxs)(c.a,{path:"/customer",children:[" ",Object(p.jsx)(k,{})," "]}),Object(p.jsxs)(c.a,{path:"/airline",children:[" ",Object(p.jsx)(N,{})," "]}),Object(p.jsxs)(c.a,{path:"/admin",children:[" ",Object(p.jsx)(_,{})," "]})]})})};var W=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(S,{})})},z=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),i(t),a(t),s(t),o(t)}))};o.a.render(Object(p.jsx)(v.a,{children:Object(p.jsx)(W,{})}),document.getElementById("root")),z()}},[[62,1,2]]]);
//# sourceMappingURL=main.9142c020.chunk.js.map